<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Gest√£o - Base de Futebol</title>
    <style>
        :root {
            --verde-grama: #1a472a;
            --verde-claro: #2e7d32;
            --azul-pdf: #1976d2;
            --branco: #ffffff;
        }

        body { 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
            background-color: var(--verde-grama);
            color: #333;
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
        }

        .container { 
            max-width: 900px; 
            width: 100%;
            background: var(--branco); 
            padding: 30px; 
            border-radius: 15px; 
            box-shadow: 0 10px 30px rgba(0,0,0,0.5); 
        }

        h2 { color: var(--verde-claro); text-align: center; text-transform: uppercase; margin-bottom: 25px; }

        /* DASHBOARD */
        .dashboard {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            background: #f1f8e9;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            border: 1px solid var(--verde-claro);
            text-align: center;
        }
        .stat-item b { display: block; font-size: 1.4em; color: var(--verde-claro); }
        .stat-item span { font-size: 0.8em; color: #666; text-transform: uppercase; }

        /* CONTROLES */
        .controles {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }
        #campoBusca {
            flex: 3;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
        }
        .btn-pdf {
            flex: 1;
            background: var(--azul-pdf);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
        }

        /* FORMUL√ÅRIO */
        form { background: #fafafa; padding: 20px; border-radius: 10px; border: 1px solid #eee; margin-bottom: 30px; }
        .form-group { margin-bottom: 15px; }
        label { display: block; font-weight: bold; margin-bottom: 5px; color: #555; }
        input, select { width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 5px; box-sizing: border-box; }
        
        #btnSubmit { 
            background: var(--verde-claro); 
            color: white; 
            border: none; 
            padding: 15px; 
            width: 100%; 
            border-radius: 8px; 
            font-weight: bold; 
            font-size: 16px; 
            cursor: pointer;
            transition: 0.3s;
        }
        #btnSubmit:hover { background: #1b5e20; }

        /* GRID DE ATLETAS */
        #listaAtletas {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
            gap: 20px;
        }
        .card-atleta {
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            padding: 15px;
            text-align: center;
            transition: 0.3s;
            position: relative;
        }
        .card-atleta:hover { transform: translateY(-5px); border-color: var(--verde-claro); box-shadow: 0 5px 15px rgba(0,0,0,0.1); }
        
        .foto-atleta {
            width: 90px;
            height: 90px;
            border-radius: 50%;
            object-fit: cover;
            border: 3px solid var(--verde-claro);
            margin-bottom: 10px;
            background: #eee;
        }

        .categoria-tag {
            background: var(--verde-claro);
            color: white;
            padding: 3px 10px;
            border-radius: 15px;
            font-size: 10px;
            position: absolute;
            top: 10px;
            right: 10px;
        }

        .acoes { display: flex; gap: 5px; margin-top: 15px; }
        .btn-edit { background: #ffa000; flex: 1; color: white; border: none; padding: 5px; border-radius: 4px; cursor: pointer; }
        .btn-del { background: #d32f2f; flex: 1; color: white; border: none; padding: 5px; border-radius: 4px; cursor: pointer; }

    </style>
</head>
<body>

    <div class="container">
        <h2>‚öΩ Gest√£o de Atletas</h2>

        <div class="dashboard" id="dashboard">
            <div class="stat-item"><b id="countTotal">0</b><span>Total</span></div>
            <div class="stat-item"><b id="countBase">0</b><span>Base (S11-S17)</span></div>
            <div class="stat-item"><b id="countPro">0</b><span>Profissional</span></div>
        </div>

        <div class="controles">
            <input type="text" id="campoBusca" placeholder="üîç Buscar por nome..." onkeyup="filtrar()">
            <button class="btn-pdf" onclick="gerarPDF()">GERAR PDF</button>
        </div>

        <form id="formCadastro">
            <div class="form-group">
                <label>Nome Completo:</label>
                <input type="text" id="nome" required>
            </div>
            <div class="form-group">
                <label>Foto do Atleta:</label>
                <input type="file" id="foto" accept="image/*">
            </div>
            <div style="display: flex; gap: 10px;">
                <div class="form-group" style="flex: 1;">
                    <label>Nascimento:</label>
                    <input type="date" id="nascimento" required>
                </div>     
        <div class="form-group" style="flex: 1;">                
            <label>Perna Dominante:</label>
                <select id="perna">
                <option value="Destro">Destro</option>
                <option value="Canhoto">Canhoto</option>
                <option value="Destro">Destro</option>
                <option value="Canhoto">Canhoto</option>
                <option value="Ambidestro">Ambidestro</option>
            </select>  
        </div>      
                <div class="form-group" style="flex: 1;">
                    <label>Posi√ß√£o:</label>
                    <select id="posicao">
                        <option value="Goleiro">Goleiro</option>
                        <option value="Zagueiro">Zagueiro</option>
                        <option value="Lateral">Lateral</option>
                        <option value="Meio-Campo">Meio-Campo</option>
                        <option value="Atacante">Atacante</option>
                    </select>
                </div>
            </div>
            <button type="submit" id="btnSubmit">SALVAR ATLETA</button>
        </form>

        <div id="listaAtletas"></div>
    </div>

    <script>
        let atletas = JSON.parse(localStorage.getItem('baseAtletas')) || [];
        let indexEdit = -1;

        // Converter imagem para Base64
        function obterBase64(file) {
            return new Promise((resolve, reject) => {
                const reader = new FileReader();
                reader.readAsDataURL(file);
                reader.onload = () => resolve(reader.result);
                reader.onerror = error => reject(error);
            });
        }

        function calcularCategoria(data) {
            const idade = new Date().getFullYear() - new Date(data).getFullYear();
            if (idade <= 13) return "Sub-13";
            if (idade <= 15) return "Sub-15";
            if (idade <= 17) return "Sub-17";
            if (idade <= 20) return "Sub-20";
            return "Profissional";
        }

        function atualizarDashboard() {
            document.getElementById('countTotal').innerText = atletas.length;
            document.getElementById('countBase').innerText = atletas.filter(a => a.categoria.includes('Sub')).length;
            document.getElementById('countPro').innerText = atletas.filter(a => a.categoria === 'Profissional').length;
        }

        function renderizar() {
            const lista = document.getElementById('listaAtletas');
            lista.innerHTML = '';
            
            atletas.forEach((atleta, i) => {
                const fotoPadrao = 'https://www.w3schools.com/howto/img_avatar.png';
                lista.innerHTML += `
                    <div class="card-atleta">
                        <span class="categoria-tag">${atleta.categoria}</span>
                        <img src="${atleta.foto || fotoPadrao}" class="foto-atleta">
                        <strong>${atleta.nome}</strong>
                        <div style="font-size: 0.85em; color: #666; margin-top: 5px;">
                            ${atleta.posicao}
                        </div>
                        <div class="acoes">
                            <button class="btn-edit" onclick="editar(${i})">Editar</button>
                            <button class="btn-del" onclick="excluir(${i})">Sair</button>
                        </div>
                    </div>
                `;
            });
            atualizarDashboard();
        }

        document.getElementById('formCadastro').addEventListener('submit', async (e) => {
            e.preventDefault();
            const fotoInput = document.getElementById('foto').files[0];
            let fotoBase64 = indexEdit > -1 ? atletas[indexEdit].foto : "";

            if (fotoInput) {
                fotoBase64 = await obterBase64(fotoInput);
            }

            const novoAtleta = {
                nome: document.getElementById('nome').value,
                nascimento: document.getElementById('nascimento').value,
                posicao: document.getElementById('posicao').value,
                categoria: calcularCategoria(document.getElementById('nascimento').value),
                foto: fotoBase64
            };

            if (indexEdit > -1) {
                atletas[indexEdit] = novoAtleta;
                indexEdit = -1;
                document.getElementById('btnSubmit').innerText = "SALVAR ATLETA";
            } else {
                atletas.push(novoAtleta);
            }

            localStorage.setItem('baseAtletas', JSON.stringify(atletas));
            document.getElementById('formCadastro').reset();
            renderizar();
        });

        window.excluir = (i) => {
            if(confirm("Remover atleta da base?")) {
                atletas.splice(i, 1);
                localStorage.setItem('baseAtletas', JSON.stringify(atletas));
                renderizar();
            }
        };

        window.editar = (i) => {
            const a = atletas[i];
            document.getElementById('nome').value = a.nome;
            document.getElementById('nascimento').value = a.nascimento;
            document.getElementById('posicao').value = a.posicao;
            indexEdit = i;
            document.getElementById('btnSubmit').innerText = "ATUALIZAR DADOS";
            window.scrollTo(0,0);
        };

        function filtrar() {
            const termo = document.getElementById('campoBusca').value.toLowerCase();
            const cards = document.querySelectorAll('.card-atleta');
            cards.forEach(card => {
                const nome = card.querySelector('strong').innerText.toLowerCase();
                card.style.display = nome.includes(termo) ? "block" : "none";
            });
        }

        function gerarPDF() {
            const win = window.open('', '', 'height=700,width=900');
            win.document.write('<html><head><title>Relat√≥rio</title></head><body>');
            win.document.write('<h1>Relat√≥rio Geral de Atletas</h1><table border="1" width="100%" style="border-collapse:collapse">');
            win.document.write('<tr><th>Nome</th><th>Categoria</th><th>Posi√ß√£o</th></tr>');
            atletas.forEach(a => {
                win.document.write(`<tr><td>${a.nome}</td><td>${a.categoria}</td><td>${a.posicao}</td></tr>`);
            });
            win.document.write('</table></body></html>');
            win.document.close();
            win.print();
        }

        renderizar();
    // ...existing code...
        renderizar();
    </script>

    <div class="controles">
        <button onclick="exportarDados()" style="background-color: #4caf50; color: white; border: none; border-radius: 8px; cursor: pointer; padding: 10px;">üíæ Baixar Backup</button>
        
        <label for="inputImportar" style="background-color: #607d8b; color: white; padding: 10px; border-radius: 8px; cursor: pointer; font-size: 13px; font-weight: bold; text-align: center; display: flex; align-items: center;">
            üìÇ Carregar Backup
        </label>
        <input type="file" id="inputImportar" style="display: none;" accept=".json" onchange="importarDados(event)">
    </div>

</body>
</html>
</body>
</html>
